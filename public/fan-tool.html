<!DOCTYPE html>

<html>
  <head>
    <meta charset="utf-8" />

    <title>Fan tool</title>

    <link rel="stylesheet" href="application.css" />

    <style>
      #marking-surface {
        background: gray;
        height: 300px;
        margin: 0 auto;
        outline: 1px dashed red;
        position: relative;
        width: 600px;
      }
    </style>
  </head>

  <body>
    <div id="marking-surface"></div>

    <div style="text-align: center">
      <button name="tool" value="fan">Fan</button>
      <button name="tool" value="circle">Circle</button>
      <button name="tool" value="ellipse">Ellipse</button>
      <button name="tool" value="star">Star</button>
    </div>

    <script src="application.js"></script>
    <script>
      (function() {
        Kinetic.Global.warn = function() {};

        var MarkingSurface = require('controllers/marking_surface');
        var FanTool = require('controllers/fan_tool');
        var CircleTool = require('controllers/circle_tool');
        var EllipseTool = require('controllers/ellipse_tool');
        var StarPointTool = require('controllers/star_point_tool');
        var $ = window.jQuery;

        window.m = new MarkingSurface({
          el: $('#marking-surface'),
          tool: FanTool
        });

        var tools = {
          fan: FanTool,
          circle: CircleTool,
          ellipse: EllipseTool,
          star: StarPointTool
        };

        $(document).on('click', 'button[name="tool"]', function(e) {
          var tool = $(e.target).val();
          window.m.setTool(tools[tool]);
        });
      }());
    </script>
  </body>
</html>
